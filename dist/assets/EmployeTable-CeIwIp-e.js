import{s as A,H as K,J as v,K as W,r as t,w as Q,x as E,v as U,j as r,f as m,a as e,e as B,y as h,c as N,d as k,Q as Y,U as Z,V as X,W as ee,g as P,I as F,Y as ae,Z as le,_ as re,T as oe,B as s,N as te,D as I,P as ne,b as ie}from"./vendor-BtQO_-CK.js";import{u as se,D as de,e as ce,f as me,h as he}from"./index-CzmVGMce.js";const o=A(K)(({theme:d})=>({[`&.${v.head}`]:{backgroundColor:"#f26729",color:"white",padding:"1em 8px"},[`&.${v.body}`]:{fontSize:12,padding:"8px 8px"}})),ue=A(W)(({theme:d})=>({"&:nth-of-type(odd)":{backgroundColor:d.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function fe(){const[d,_]=t.useState([]),[j,u]=t.useState(!1),[pe,c]=t.useState(""),[n,D]=t.useState(1),[b,q]=t.useState(1),[z,M]=t.useState(0),[p,O]=t.useState(""),[R,w]=t.useState(!1),[T,x]=t.useState(null),g=5,{showWarningDialog:y,DialogComponent:$}=se(),C=async()=>{try{const a=await ce(y,n,g,p);_(a.data),q(a.totalPages),M(a.total)}catch(a){console.error("Failed to fetch employees:",a)}};t.useEffect(()=>{C()},[n,p]);const H=Q({employeeName:E().required("Employee name is required"),email:E().email("Enter a valid email").required("Email is required"),password:E().required("Password is required")}),l=U({initialValues:{employeeName:"",email:"",password:""},validationSchema:H,onSubmit:async a=>{try{const i={Employee_name:a.employeeName,email:a.email,password:a.password};await me(y,i),C(),u(!1),l.resetForm(),c("")}catch(i){console.error("Error adding employee:",i),i.message&&i.message==="Email is already in use."?(c("Email is already in use."),l.setFieldError("email","Email is already in use.")):c("Failed to add employee. Please try again.")}}}),L=()=>{l.handleSubmit()},S=()=>{u(!1),l.resetForm(),c("")},V=a=>a?new Date(a).toISOString().split("T")[0]:"",G=a=>{x(a),w(!0)},f=()=>{x(null),w(!1)},J=async()=>{if(T)try{await he(y,T.Emp_Id),f(),C()}catch(a){console.error("Failed to delete employee:",a)}};return r(de,{children:[r(m,{sx:{display:"flex",flexDirection:"column",width:"100%",paddingLeft:2,paddingRight:2,marginTop:-8,overflow:"auto"},children:[e(te,{}),r(m,{sx:{display:"flex",justifyContent:"space-between",zIndex:200,marginTop:"4em",marginBottom:"-3.5em"},children:[e(h,{label:"Search Employees",variant:"outlined",margin:"normal",value:p,onChange:a=>O(a.target.value),size:"small"}),e(s,{sx:{height:"3em",marginTop:"1.3em"},variant:"contained",color:"primary",onClick:()=>u(!0),children:"Add Employee"})]}),r(B,{open:j,onClose:S,children:[e(I,{children:"Add Employee"}),e(N,{children:r("form",{onSubmit:l.handleSubmit,children:[e(h,{label:"Employee Name",fullWidth:!0,margin:"dense",id:"employeeName",name:"employeeName",value:l.values.employeeName,onChange:l.handleChange,onBlur:l.handleBlur,error:l.touched.employeeName&&!!l.errors.employeeName,helperText:l.touched.employeeName&&l.errors.employeeName}),e(h,{label:"Email",fullWidth:!0,margin:"dense",id:"email",name:"email",value:l.values.email,onChange:l.handleChange,onBlur:l.handleBlur,error:l.touched.email&&!!l.errors.email,helperText:l.touched.email&&l.errors.email}),e(h,{label:"Password",fullWidth:!0,margin:"dense",id:"password",name:"password",type:"password",value:l.values.password,onChange:l.handleChange,onBlur:l.handleBlur,error:l.touched.password&&!!l.errors.password,helperText:l.touched.password&&l.errors.password})]})}),r(k,{children:[e(s,{onClick:S,color:"secondary",children:"Cancel"}),e(s,{onClick:L,color:"primary",children:"Submit"})]})]}),r(m,{component:"main",sx:{flexGrow:1,bgcolor:"background.default",width:"100%"},children:[e(ne,{}),e(re,{component:Y,children:r(Z,{sx:{minWidth:700},"aria-label":"customized table",children:[e(X,{children:r(W,{children:[e(o,{children:"S.No"}),e(o,{align:"center",children:"Emp Id"}),e(o,{align:"center",children:"Employee Name"}),e(o,{align:"center",children:"Created Date"}),e(o,{align:"center",children:"Status"}),e(o,{align:"center",children:"Actions"})]})}),e(ee,{children:d.map((a,i)=>r(ue,{children:[e(o,{component:"th",scope:"row",children:i+1+(n-1)*g}),e(o,{align:"center",children:a==null?void 0:a.Emp_Id}),e(o,{align:"center",children:a==null?void 0:a.Employee_name}),e(o,{align:"center",children:V(a==null?void 0:a.createdAt)}),e(o,{align:"center",children:a!=null&&a.Is_deleted?"Deleted":"Active"}),r(o,{style:{textAlign:"center"},children:[e(P,{title:"Edit",children:e(F,{children:e(ae,{})})}),e(P,{title:"Delete",children:e(F,{onClick:()=>G(a),children:e(le,{color:"red"})})})]})]},a.Emp_Id))})]})}),e(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:r(oe,{variant:"body2",component:"div",children:[e(s,{disabled:n===1,onClick:()=>D(n-1),children:"Previous"}),"Page ",n," of ",b," | Total Employees: ",z,e(s,{disabled:d.length<g||n===b,onClick:()=>D(n+1),children:"Next"})]})})]}),r(B,{open:R,onClose:f,children:[e(I,{children:"Confirm Deletion"}),e(N,{children:e(ie,{children:"Are you sure you want to delete this employee?"})}),r(k,{children:[e(s,{onClick:f,color:"primary",children:"Cancel"}),e(s,{onClick:J,color:"secondary",autoFocus:!0,children:"Delete"})]})]})]}),$]})}export{fe as default};
