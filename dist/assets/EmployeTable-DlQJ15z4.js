import{s as D,H as z,J as x,K as v,r as o,w as _,x as y,v as M,j as l,f as m,a as e,e as R,y as h,c as $,d as H,Q as L,U as O,V,W as G,g as T,I as S,Y as J,Z as K,_ as Q,T as U,B as c,N as Y,D as Z,P as X}from"./vendor-BtQO_-CK.js";import{u as ee,D as ae,d as re,e as le}from"./index-IdKhXTeo.js";const n=D(z)(({theme:i})=>({[`&.${x.head}`]:{backgroundColor:"#f26729",color:"white",padding:"1em 8px"},[`&.${x.body}`]:{fontSize:12,padding:"8px 8px"}})),ne=D(v)(({theme:i})=>({"&:nth-of-type(odd)":{backgroundColor:i.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function de(){const[i,B]=o.useState([]),[N,u]=o.useState(!1),[te,d]=o.useState(""),[t,b]=o.useState(1),[f,P]=o.useState(1),[k,I]=o.useState(0),[g,A]=o.useState(""),p=5,{showWarningDialog:E,DialogComponent:F}=ee(),C=async()=>{try{const a=await re(E,t,p,g);B(a.data),P(a.totalPages),I(a.total)}catch(a){console.error("Failed to fetch employees:",a)}};o.useEffect(()=>{C()},[t,g]);const W=_({employeeName:y().required("Employee name is required"),email:y().email("Enter a valid email").required("Email is required"),password:y().required("Password is required")}),r=M({initialValues:{employeeName:"",email:"",password:""},validationSchema:W,onSubmit:async a=>{try{const s={Employee_name:a.employeeName,email:a.email,password:a.password};await le(E,s),C(),u(!1),r.resetForm(),d("")}catch(s){console.error("Error adding employee:",s),s.message&&s.message==="Email is already in use."?(d("Email is already in use."),r.setFieldError("email","Email is already in use.")):d("Failed to add employee. Please try again.")}}}),j=()=>{r.handleSubmit()},w=()=>{u(!1),r.resetForm(),d("")},q=a=>a?new Date(a).toISOString().split("T")[0]:"";return l(ae,{children:[l(m,{sx:{display:"flex",flexDirection:"column",width:"100%",paddingLeft:2,paddingRight:2,marginTop:-8,overflow:"auto"},children:[e(Y,{}),l(m,{sx:{display:"flex",justifyContent:"space-between",zIndex:200,marginTop:"4em",marginBottom:"-3.5em"},children:[e(h,{label:"Search Employees",variant:"outlined",margin:"normal",value:g,onChange:a=>A(a.target.value),size:"small"}),e(c,{sx:{height:"3em",marginTop:"1.3em"},variant:"contained",color:"primary",onClick:()=>u(!0),children:"Add Employee"})]}),l(R,{open:N,onClose:w,children:[e(Z,{children:"Add Employee"}),e($,{children:l("form",{onSubmit:r.handleSubmit,children:[e(h,{label:"Employee Name",fullWidth:!0,margin:"dense",id:"employeeName",name:"employeeName",value:r.values.employeeName,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.employeeName&&!!r.errors.employeeName,helperText:r.touched.employeeName&&r.errors.employeeName}),e(h,{label:"Email",fullWidth:!0,margin:"dense",id:"email",name:"email",value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.email&&!!r.errors.email,helperText:r.touched.email&&r.errors.email}),e(h,{label:"Password",fullWidth:!0,margin:"dense",id:"password",name:"password",type:"password",value:r.values.password,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.password&&!!r.errors.password,helperText:r.touched.password&&r.errors.password})]})}),l(H,{children:[e(c,{onClick:w,color:"secondary",children:"Cancel"}),e(c,{onClick:j,color:"primary",children:"Submit"})]})]}),l(m,{component:"main",sx:{flexGrow:1,bgcolor:"background.default",width:"100%"},children:[e(X,{}),e(Q,{component:L,children:l(O,{sx:{minWidth:700},"aria-label":"customized table",children:[e(V,{children:l(v,{children:[e(n,{children:"S.No"}),e(n,{align:"center",children:"Emp Id"}),e(n,{align:"center",children:"Employee Name"}),e(n,{align:"center",children:"Created Date"}),e(n,{align:"center",children:"Status"}),e(n,{align:"center",children:"Actions"})]})}),e(G,{children:i.map((a,s)=>l(ne,{children:[e(n,{component:"th",scope:"row",children:s+1+(t-1)*p}),e(n,{align:"center",children:a==null?void 0:a.Emp_Id}),e(n,{align:"center",children:a==null?void 0:a.Employee_name}),e(n,{align:"center",children:q(a==null?void 0:a.createdAt)}),e(n,{align:"center",children:a!=null&&a.Is_deleted?"Deleted":"Active"}),l(n,{style:{textAlign:"center"},children:[e(T,{title:"Edit",children:e(S,{children:e(J,{})})}),e(T,{title:"Delete",children:e(S,{children:e(K,{})})})]})]},a.Emp_Id))})]})}),e(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:l(U,{variant:"body2",component:"div",children:[e(c,{disabled:t===1,onClick:()=>b(t-1),children:"Previous"}),"Page ",t," of ",f," | Total Employees: ",k,e(c,{disabled:i.length<p||t===f,onClick:()=>b(t+1),children:"Next"})]})})]})]}),F]})}export{de as default};
