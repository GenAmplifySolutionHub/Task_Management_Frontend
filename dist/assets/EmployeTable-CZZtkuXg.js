import{s as S,H as q,J as w,K as v,r as o,w as z,x as y,v as _,a as e,j as t,N as W,f as m,y as h,B as c,e as M,D as R,c as $,d as H,P as L,Q as O,U as V,V as G,W as J,X as K,g as x,I as T,Z as Q,_ as U,T as X}from"./vendor-s1X2VnKx.js";import{D as Z,c as Y,d as ee}from"./index-CBGQAfrx.js";const l=S(q)(({theme:i})=>({[`&.${w.head}`]:{backgroundColor:"#f26729",color:"white",padding:"1em 8px"},[`&.${w.body}`]:{fontSize:12,padding:"8px 8px"}})),ae=S(v)(({theme:i})=>({"&:nth-of-type(odd)":{backgroundColor:i.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}));function oe(){const[i,D]=o.useState([]),[B,u]=o.useState(!1),[re,d]=o.useState(""),[n,b]=o.useState(1),[f,N]=o.useState(1),[P,k]=o.useState(0),[p,I]=o.useState(""),g=5,E=async()=>{try{const a=await Y(n,g,p);D(a.data),N(a.totalPages),k(a.total)}catch(a){console.error("Failed to fetch employees:",a)}};o.useEffect(()=>{E()},[n,p]);const A=z({employeeName:y().required("Employee name is required"),email:y().email("Enter a valid email").required("Email is required"),password:y().required("Password is required")}),r=_({initialValues:{employeeName:"",email:"",password:""},validationSchema:A,onSubmit:async a=>{try{const s={Employee_name:a.employeeName,email:a.email,password:a.password};await ee(s),E(),u(!1),r.resetForm(),d("")}catch(s){console.error("Error adding employee:",s),s.message&&s.message==="Email is already in use."?(d("Email is already in use."),r.setFieldError("email","Email is already in use.")):d("Failed to add employee. Please try again.")}}}),F=()=>{r.handleSubmit()},C=()=>{u(!1),r.resetForm(),d("")},j=a=>a?new Date(a).toISOString().split("T")[0]:"";return e(Z,{children:t(m,{sx:{display:"flex",flexDirection:"column",width:"100%",paddingLeft:2,paddingRight:2,marginTop:-8,overflow:"auto"},children:[e(W,{}),t(m,{sx:{display:"flex",justifyContent:"space-between",zIndex:200,marginTop:"4em",marginBottom:"-3.5em"},children:[e(h,{label:"Search Employees",variant:"outlined",margin:"normal",value:p,onChange:a=>I(a.target.value),size:"small"}),e(c,{sx:{height:"3em",marginTop:"1.3em"},variant:"contained",color:"primary",onClick:()=>u(!0),children:"Add Employee"})]}),t(M,{open:B,onClose:C,children:[e(R,{children:"Add Employee"}),e($,{children:t("form",{onSubmit:r.handleSubmit,children:[e(h,{label:"Employee Name",fullWidth:!0,margin:"dense",id:"employeeName",name:"employeeName",value:r.values.employeeName,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.employeeName&&!!r.errors.employeeName,helperText:r.touched.employeeName&&r.errors.employeeName}),e(h,{label:"Email",fullWidth:!0,margin:"dense",id:"email",name:"email",value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.email&&!!r.errors.email,helperText:r.touched.email&&r.errors.email}),e(h,{label:"Password",fullWidth:!0,margin:"dense",id:"password",name:"password",type:"password",value:r.values.password,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.password&&!!r.errors.password,helperText:r.touched.password&&r.errors.password})]})}),t(H,{children:[e(c,{onClick:C,color:"secondary",children:"Cancel"}),e(c,{onClick:F,color:"primary",children:"Submit"})]})]}),t(m,{component:"main",sx:{flexGrow:1,bgcolor:"background.default",width:"100%"},children:[e(L,{}),e(O,{component:V,children:t(G,{sx:{minWidth:700},"aria-label":"customized table",children:[e(J,{children:t(v,{children:[e(l,{children:"S.No"}),e(l,{align:"center",children:"Emp Id"}),e(l,{align:"center",children:"Employee Name"}),e(l,{align:"center",children:"Created Date"}),e(l,{align:"center",children:"Status"}),e(l,{align:"center",children:"Actions"})]})}),e(K,{children:i.map((a,s)=>t(ae,{children:[e(l,{component:"th",scope:"row",children:s+1+(n-1)*g}),e(l,{align:"center",children:a==null?void 0:a.Emp_Id}),e(l,{align:"center",children:a==null?void 0:a.Employee_name}),e(l,{align:"center",children:j(a==null?void 0:a.createdAt)}),e(l,{align:"center",children:a!=null&&a.Is_deleted?"Deleted":"Active"}),t(l,{style:{textAlign:"center"},children:[e(x,{title:"Edit",children:e(T,{children:e(Q,{})})}),e(x,{title:"Delete",children:e(T,{children:e(U,{})})})]})]},a.Emp_Id))})]})}),e(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2},children:t(X,{variant:"body2",component:"div",children:[e(c,{disabled:n===1,onClick:()=>b(n-1),children:"Previous"}),"Page ",n," of ",f," | Total Employees: ",P,e(c,{disabled:i.length<g||n===f,onClick:()=>b(n+1),children:"Next"})]})})]})]})})}export{oe as default};
